import{c as pa,a as c,f as x}from"../chunks/z1_h_S-m.js";import{i as ha}from"../chunks/CKvl8f00.js";import{p as ua,o as fa,f as _a,a as ba,$ as ya,s as h,m as z,g as t,c as s,b as d,r as a,t as S,e as wa,n as u}from"../chunks/DO95TrpH.js";import{h as ka,s as m,e as Ma}from"../chunks/DePN81sB.js";import{i as g}from"../chunks/i89i58Dp.js";import{e as Ca,i as ja}from"../chunks/KzdxLMOR.js";import{s as Ea}from"../chunks/DPUg7jpB.js";import{g as N}from"../chunks/BvPgAsJ_.js";import{a as Q,b as La}from"../chunks/VlzhU-cE.js";var za=x('<div class="flex items-center justify-center min-h-screen"><div class="text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"></div> <p class="mt-4 text-gray-600">Loading dashboard...</p></div></div>'),Sa=x("<span> </span>"),Da=x('<a href="/admin" class="card p-6 hover:shadow-lg transition-shadow cursor-pointer"><div class="flex items-center"><div class="flex-shrink-0"><div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path></svg></div></div> <div class="ml-4"><h3 class="text-lg font-medium text-gray-900">User Management</h3> <p class="text-sm text-gray-500">Manage users and system settings</p></div></div></a>'),Ta=x('<a href="/lead" class="card p-6 hover:shadow-lg transition-shadow cursor-pointer"><div class="flex items-center"><div class="flex-shrink-0"><div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div></div> <div class="ml-4"><h3 class="text-lg font-medium text-gray-900">Engineers</h3> <p class="text-sm text-gray-500">Manage engineers and assignments</p></div></div></a>'),Aa=x('<div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-4"><div class="text-2xl font-bold text-primary-600"> </div> <div class="text-sm text-gray-500">Total Evaluations</div></div> <div class="card p-4"><div class="text-2xl font-bold text-green-600"> </div> <div class="text-sm text-gray-500"> </div></div> <div class="card p-4"><div class="text-2xl font-bold text-blue-600"> </div> <div class="text-sm text-gray-500">Engineers</div></div> <div class="card p-4"><div class="text-2xl font-bold text-purple-600"> </div> <div class="text-sm text-gray-500">Coaches</div></div></div>'),Ha=x('<div class="grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-4"><div class="text-2xl font-bold text-gray-400">...</div> <div class="text-sm text-gray-500">Total Evaluations</div></div> <div class="card p-4"><div class="text-2xl font-bold text-gray-400">...</div> <div class="text-sm text-gray-500">This Month</div></div> <div class="card p-4"><div class="text-2xl font-bold text-gray-400">...</div> <div class="text-sm text-gray-500">Engineers</div></div> <div class="card p-4"><div class="text-2xl font-bold text-gray-400">...</div> <div class="text-sm text-gray-500">Coaches</div></div></div>'),Pa=x('<div class="min-h-screen bg-gray-50"><nav class="bg-white shadow-sm border-b border-gray-200"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between h-16"><div class="flex items-center"><h1 class="text-xl font-semibold text-gray-900">KCS Performance Portal</h1></div> <div class="flex items-center space-x-4"><div class="text-sm text-gray-700">Welcome, <span class="font-medium"> </span></div> <div class="flex space-x-1"></div> <button class="btn-secondary text-sm">Logout</button></div></div></div></nav> <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"><div class="px-4 py-6 sm:px-0"><div class="card p-6 mb-6"><h2 class="text-2xl font-bold text-gray-900 mb-2">Welcome to KCS Portal</h2> <p class="text-gray-600">Knowledge-Centered Service Performance Tracking System</p></div> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"><!> <!> <a href="/evaluations" class="card p-6 hover:shadow-lg transition-shadow cursor-pointer"><div class="flex items-center"><div class="flex-shrink-0"><div class="w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div> <div class="ml-4"><h3 class="text-lg font-medium text-gray-900">Evaluations</h3> <p class="text-sm text-gray-500">View and manage evaluations</p></div></div></a> <a href="/reports" class="card p-6 hover:shadow-lg transition-shadow cursor-pointer"><div class="flex items-center"><div class="flex-shrink-0"><div class="w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div></div> <div class="ml-4"><h3 class="text-lg font-medium text-gray-900">Reports</h3> <p class="text-sm text-gray-500">View performance statistics</p></div></div></a></div> <div class="mt-8"><h3 class="text-lg font-medium text-gray-900 mb-4">Quick Overview</h3> <!></div></div></div></div>');function Na($,F){ua(F,!1);let v=z(null),f=z(!0),l=z(null),D=0;const G=5*60*1e3;fa(()=>Q.subscribe(e=>{!e.isAuthenticated&&!e.isLoading?N("/login"):e.isAuthenticated&&(h(v,e.user),J())}));async function J(){const i=Date.now();if(!(t(l)&&i-D<G))try{h(f,!0);const e=await La.getDashboardOverview();h(l,e.overview),D=i}catch(e){console.error("Error loading dashboard data:",e)}finally{h(f,!1)}}async function X(){await Q.logout(),N("/login")}function Y(i){const e=[];return i.is_admin&&e.push("Admin"),i.is_lead&&e.push("Lead"),i.is_coach&&e.push("Coach"),i.is_manager&&e.push("Manager"),e.length>0?e:["User"]}ha();var T=pa();ka(i=>{ya.title="Dashboard - KCS Portal"});var Z=_a(T);{var aa=i=>{var e=za();c(i,e)},sa=(i,e)=>{{var ea=_=>{var b=Pa(),y=s(b),A=s(y),H=s(A),P=d(s(H),2),w=s(P),B=d(s(w)),ta=s(B,!0);a(B),a(w);var k=d(w,2);Ca(k,5,()=>Y(t(v)),ja,(r,o)=>{var n=Sa(),p=s(n,!0);a(n),S(C=>{Ea(n,1,`badge badge-${C??""}`),m(p,t(o))},[()=>t(o).toLowerCase()],wa),c(r,n)}),a(k);var ia=d(k,2);a(P),a(H),a(A),a(y);var K=d(y,2),U=s(K),M=d(s(U),2),V=s(M);{var ra=r=>{var o=Da();c(r,o)};g(V,r=>{(t(v).is_admin||t(v).is_manager)&&r(ra)})}var da=d(V,2);{var oa=r=>{var o=Ta();c(r,o)};g(da,r=>{(t(v).is_lead||t(v).is_manager)&&r(oa)})}u(4),a(M);var O=d(M,2),va=d(s(O),2);{var la=r=>{var o=Aa(),n=s(o),p=s(n),C=s(p,!0);a(p),u(2),a(n);var j=d(n,2),E=s(j),ca=s(E,!0);a(E);var R=d(E,2),ma=s(R,!0);a(R),a(j);var L=d(j,2),W=s(L),xa=s(W,!0);a(W),u(2),a(L);var q=d(L,2),I=s(q),ga=s(I,!0);a(I),u(2),a(q),a(o),S(()=>{m(C,t(l).total_evaluations),m(ca,t(l).this_month_evaluations),m(ma,t(l).current_month),m(xa,t(l).total_engineers),m(ga,t(l).total_coaches)}),c(r,o)},na=r=>{var o=Ha();c(r,o)};g(va,r=>{t(l)?r(la):r(na,!1)})}a(O),a(U),a(K),a(b),S(()=>m(ta,t(v).name)),Ma("click",ia,X),c(_,b)};g(i,_=>{t(v)&&_(ea)},e)}};g(Z,i=>{t(f)?i(aa):i(sa,!1)})}c($,T),ba()}export{Na as component};
