import{c as Xe,a as l,f as c}from"../chunks/z1_h_S-m.js";import{i as Tt}from"../chunks/CKvl8f00.js";import{p as jt,m as S,o as Bt,l as zt,k as It,f as ye,a as Rt,$ as Pt,s as u,g as e,c as t,b as r,r as a,n as ee,t as j,e as Be,d as se,i as ze}from"../chunks/DO95TrpH.js";import{h as Nt,s as M,e as I}from"../chunks/DePN81sB.js";import{i as x}from"../chunks/i89i58Dp.js";import{k as Ft}from"../chunks/CfKK4Vti.js";import{e as we,i as ke}from"../chunks/KzdxLMOR.js";import{r as pe,s as za}from"../chunks/B0rVqcg2.js";import{s as qt}from"../chunks/DPUg7jpB.js";import{b as Ie,a as Ia}from"../chunks/CoGRtSRs.js";import{b as Re}from"../chunks/DWPWRXnJ.js";import{p as Ze}from"../chunks/Bfc47y5P.js";import{g as $e}from"../chunks/BvPgAsJ_.js";import{a as Ra,b as re}from"../chunks/VlzhU-cE.js";import{t as B}from"../chunks/BCl9OAM7.js";var Ot=c('<div class="flex items-center justify-center min-h-screen"><div class="text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"></div> <p class="mt-4 text-gray-600">Loading team data...</p></div></div>'),Ht=c('<span class="badge badge-admin">Admin</span>'),Vt=c('<span class="badge badge-manager">Manager</span>'),Yt=c('<span class="badge badge-lead">Lead</span>'),Gt=c('<span class="badge badge-coach">Coach</span>'),Kt=c('<button class="btn-primary"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg> Add Engineer</button>'),Ut=c('<div class="flex items-center"><input id="show-only-my-team" type="checkbox" class="mr-2"/> <label for="show-only-my-team" class="text-sm text-gray-700">Show only my team</label></div>'),Wt=c('<div class="p-6 text-center"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No engineers</h3> <p class="mt-1 text-sm text-gray-500">Get started by adding an engineer to your team.</p></div>'),Jt=c('<div class="p-6 text-center"><svg class="mx-auto h-12 w-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg> <h3 class="mt-2 text-sm font-medium text-gray-900">No engineers found</h3> <p class="mt-1 text-sm text-gray-500">Try adjusting your search or filters.</p></div>'),Qt=c('<div class="text-sm text-gray-900"> </div>'),Xt=c('<span class="text-sm text-gray-500">No lead assigned</span>'),Zt=c('<div class="text-sm text-gray-900"> </div>'),$t=c('<span class="text-sm text-gray-500">No coach assigned</span>'),es=c('<div class="text-sm text-gray-500"> </div>'),as=c('<span class="text-sm text-gray-500">-</span>'),ts=c('<button class="text-gray-700 block w-full text-left px-4 py-2 text-sm hover:bg-gray-100" role="menuitem">Change Lead</button>'),ss=c('<button class="text-gray-700 block w-full text-left px-4 py-2 text-sm hover:bg-gray-100" role="menuitem">End Coach Assignment</button>'),rs=c('<button class="text-gray-700 block w-full text-left px-4 py-2 text-sm hover:bg-gray-100" role="menuitem">Assign Coach</button>'),is=c('<button class="text-red-600 block w-full text-left px-4 py-2 text-sm hover:bg-gray-100" role="menuitem">Delete</button>'),ns=c('<button class="text-green-600 block w-full text-left px-4 py-2 text-sm hover:bg-gray-100" role="menuitem">Reactivate</button>'),os=c('<div><button type="button" class="dropdown-toggle inline-flex justify-center w-full rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500" aria-expanded="true" aria-haspopup="true">Actions <svg class="-mr-1 ml-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div> <div class="dropdown-menu hidden origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-50" role="menu" aria-orientation="vertical"><div class="py-1" role="none"><a class="text-gray-700 block px-4 py-2 text-sm hover:bg-gray-100" role="menuitem">View Statistics</a> <!> <!> <!></div></div>',1),ds=c('<tr class="hover:bg-gray-50"><td class="px-6 py-4 whitespace-nowrap"><div class="text-sm font-medium text-gray-900"> </div> <div class="text-sm text-gray-500"> </div></td><td class="px-6 py-4 whitespace-nowrap"><!></td><td class="px-6 py-4 whitespace-nowrap"><span> </span></td><td class="px-6 py-4 whitespace-nowrap"><!></td><td class="px-6 py-4 whitespace-nowrap"><!></td><td class="px-6 py-4 whitespace-nowrap text-sm font-medium overflow-visible"><div class="relative inline-block text-left overflow-visible"><!></div></td></tr>'),ls=c('<div class="overflow-x-auto w-full h-[600px] overflow-visible"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Engineer</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Lead</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Coach</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Assignment date</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),vs=c("<option> </option>"),cs=c('<select id="lead-select" class="input"><option>Select Lead (Optional)</option><!></select>'),ms=c("<option> </option>"),us=c('<select id="lead-select" class="input"><option selected> </option><!></select>'),gs=c('<input type="text" value="Not applicable" disabled class="input opacity-50"/>'),ps=c('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"><div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"><div class="mt-3"><h3 class="text-lg font-medium text-gray-900 mb-4">Add New Engineer</h3> <form><div class="mb-4"><label for="engineer-name" class="block text-sm font-medium text-gray-700 mb-1">Engineer Name</label> <input id="engineer-name" type="text" required class="input" placeholder="Enter engineer name"/></div> <div class="mb-4"><label for="lead-select" class="block text-sm font-medium text-gray-700 mb-1">Lead</label> <!></div> <div class="flex justify-end space-x-3"><button type="button" class="btn-secondary">Cancel</button> <button type="submit" class="btn-primary">Add Engineer</button></div></form></div></div></div>'),_s=c("<option> </option>"),fs=c('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"><div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"><div class="mt-3"><h3 class="text-lg font-medium text-gray-900 mb-4"> </h3> <form><div class="mb-4"><label for="coach-select" class="block text-sm font-medium text-gray-700 mb-1">Coach</label> <select id="coach-select" required class="input"><option>Select Coach</option><!></select></div> <div class="mb-4"><label for="start-date" class="block text-sm font-medium text-gray-700 mb-1">Start Date</label> <input id="start-date" type="date" required class="input"/></div> <div class="flex justify-end space-x-3"><button type="button" class="btn-secondary">Cancel</button> <button type="submit" class="btn-primary">Assign Coach</button></div></form></div></div></div>'),xs=c("<option> </option>"),bs=c('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"><div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"><div class="mt-3"><h3 class="text-lg font-medium text-gray-900 mb-4"> </h3> <form><div class="mb-4"><label for="assign-lead-select" class="block text-sm font-medium text-gray-700 mb-1">Lead</label> <select id="assign-lead-select" required class="input"><option>Select Lead</option><!></select></div> <div class="flex justify-end space-x-3"><button type="button" class="btn-secondary">Cancel</button> <button type="submit" class="btn-primary">Assign Lead</button></div></form></div></div></div>'),hs=c(`<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"><div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"><div class="mt-3"><h3 class="text-lg font-medium text-red-900 mb-4"> </h3> <div class="mb-4"><p class="text-sm text-gray-700 mb-4">This will deactivate the engineer and remove them from active lists. 
              This action cannot be undone.</p> <p class="text-sm font-medium text-gray-900 mb-2">Type <span class="font-bold text-red-600">DELETE</span> to confirm:</p> <input type="text" placeholder="Type DELETE to confirm" class="input"/></div> <div class="flex justify-end space-x-3"><button type="button" class="btn-secondary">Cancel</button> <button class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 disabled:opacity-50">Delete Engineer</button></div></div></div></div>`),ys=c('<div class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"><div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"><div class="mt-3"><h3 class="text-lg font-medium text-green-900 mb-4"> </h3> <div class="mb-4"><p class="text-sm text-gray-700 mb-4">This will reactivate the engineer and make them available for assignments and evaluations again.</p></div> <div class="flex justify-end space-x-3"><button type="button" class="btn-secondary">Cancel</button> <button class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Reactivate Engineer</button></div></div></div></div>'),ws=c('<div class="min-h-screen bg-gray-50"><nav class="bg-white shadow-sm border-b border-gray-200"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex justify-between h-16"><div class="flex items-center space-x-4"><a href="/dashboard" class="text-primary-600 hover:text-primary-700" aria-label="Back to Dashboard"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg> <span class="sr-only">Back to Dashboard</span></a> <h1 class="text-xl font-semibold text-gray-900">Engineers</h1></div> <div class="flex items-center space-x-4"><span class="text-sm text-gray-700"> </span> <!> <button class="btn-secondary text-sm">Logout</button></div></div></div></nav> <div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8"><div class="px-4 py-6 sm:px-0"><div class="flex justify-between items-center mb-6"><div><h2 class="text-2xl font-bold text-gray-900">Engineers</h2> <p class="text-gray-600">Manage engineers and coach assignments</p></div> <div class="flex space-x-3"><!> <a href="/reports" class="btn-primary"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> View Reports</a></div></div> <div class="card mb-6"><div class="px-6 py-4"><div class="flex flex-col sm:flex-row gap-4"><div class="flex-1"><label for="search-engineers" class="block text-sm font-medium text-gray-700 mb-1">Search Engineers</label> <input id="search-engineers" type="text" placeholder="Search by name, lead, or coach..." class="input"/></div> <div class="flex flex-col sm:flex-row gap-4 sm:items-end"><!> <div class="flex items-center"><input id="hide-inactive-engineers" type="checkbox" class="mr-2"/> <label for="hide-inactive-engineers" class="text-sm text-gray-700">Hide inactive engineers</label></div></div></div></div></div> <div class="card overflow-visible mb-8 min-h-[600px] w-full"><div class="px-6 py-4 border-b border-gray-200"><div class="flex justify-between items-center"><h3 class="text-lg font-medium text-gray-900">Engineers</h3> <div class="flex items-center"><span class="text-sm text-gray-500"> </span></div></div></div> <!></div> <div class="mt-8 grid grid-cols-1 md:grid-cols-4 gap-4"><div class="card p-4"><div class="text-2xl font-bold text-primary-600"> </div> <div class="text-sm text-gray-500">Total Engineers</div></div> <div class="card p-4"><div class="text-2xl font-bold text-green-600"> </div> <div class="text-sm text-gray-500">Active Engineers</div></div> <div class="card p-4"><div class="text-2xl font-bold text-blue-600"> </div> <div class="text-sm text-gray-500">Active Assignments</div></div> <div class="card p-4"><div class="text-2xl font-bold text-purple-600"> </div> <div class="text-sm text-gray-500">Available Coaches</div></div></div></div></div></div> <!> <!> <!> <!> <!>',1);function Ns(Pa,Na){jt(Na,!1);const _e=S();let n=S(null),Pe=S(!0),ie=S([]),Ne=S([]),Ee=S([]),de=S([]),Ae=S(!1),Ce=S(!1),Le=S(!1),Me=S(!1),De=S(!1),N=S(null),le=S(""),Se=S(!1),Te=S(!0),ne=null;function Fa(s){if(ne===s){const m=document.getElementById(s);m&&m.classList.add("hidden"),ne=null;return}if(ne){const m=document.getElementById(ne);m&&m.classList.add("hidden")}const d=document.getElementById(s);d&&d.classList.remove("hidden"),ne=s}function ve(){if(ne){const s=document.getElementById(ne);s&&s.classList.add("hidden"),ne=null}}let fe=S(""),U=S({engineer_id:0,lead_user_id:0}),F=S({name:"",lead_user_id:void 0}),V=S({engineer_id:0,coach_user_id:0,start_date:new Date().toISOString().split("T")[0]});Bt(()=>{const s=Ra.subscribe(d=>{var m,f,p,Y;!d.isAuthenticated&&!d.isLoading?$e("/login"):d.isAuthenticated&&(u(n,d.user),!((m=e(n))!=null&&m.is_lead)&&!((f=e(n))!=null&&f.is_admin)&&!((p=e(n))!=null&&p.is_coach)&&!((Y=e(n))!=null&&Y.is_manager)?$e("/dashboard"):ce())});return document.addEventListener("click",d=>{const m=d.target;m.closest(".dropdown-menu")||m.closest(".dropdown-toggle")||ve()}),()=>{s(),document.removeEventListener("click",ve)}});async function ce(){try{u(Pe,!0);const[s,d]=await Promise.all([re.getAllEngineers(),re.getAllUsers()]);u(ie,s.engineers),u(Ee,d.users.filter(p=>p.is_coach)),u(de,d.users.filter(p=>p.is_lead||p.is_admin||p.is_manager));const m=e(ie).map(p=>re.getEngineerAssignments(p.id)),f=await Promise.all(m);u(Ne,f.flatMap(p=>p.assignments))}catch(s){console.error("Error loading data:",s)}finally{u(Pe,!1)}}async function qa(){var s,d,m,f;try{if(!e(F).name.trim()){B.add({type:"warning",message:"Please enter engineer name"});return}await re.createEngineer(e(F)),u(Ae,!1),u(F,{name:"",lead_user_id:(s=e(n))!=null&&s.is_lead&&!((d=e(n))!=null&&d.is_admin)?e(n).id:void 0}),B.add({type:"success",message:"Engineer created successfully"}),await ce()}catch(p){console.error("Error creating engineer:",p);const Y=((f=(m=p.response)==null?void 0:m.data)==null?void 0:f.error)||"Failed to create engineer";B.add({type:"error",message:Y})}}async function Oa(){var s,d,m;try{if(!e(V).engineer_id||!e(V).coach_user_id){B.add({type:"warning",message:"Please select both engineer and coach"});return}await re.createCoachAssignment(e(V)),u(Ce,!1),u(V,{engineer_id:0,coach_user_id:0,start_date:new Date().toISOString().split("T")[0]}),B.add({type:"success",message:"Coach assigned successfully"}),await ce()}catch(f){console.error("Error assigning coach:",f);const p=((d=(s=f.response)==null?void 0:s.data)==null?void 0:d.error)||"Failed to assign coach";((m=f.response)==null?void 0:m.status)===403?B.add({type:"error",message:"Access denied: You can only assign coaches to engineers that report to you",duration:7e3}):B.add({type:"error",message:p})}}async function Ha(s){var d,m,f;try{const p=new Date().toISOString().split("T")[0];await re.endCoachAssignment(s,p),B.add({type:"success",message:"Coach assignment ended successfully"}),await ce()}catch(p){console.error("Error ending assignment:",p);const Y=((m=(d=p.response)==null?void 0:d.data)==null?void 0:m.error)||"Failed to end assignment";((f=p.response)==null?void 0:f.status)===403?B.add({type:"error",message:"Access denied: You can only manage assignments for engineers that report to you",duration:7e3}):B.add({type:"error",message:Y})}}function Va(s){u(N,s),se(V,e(V).engineer_id=s.id),u(Ce,!0)}function Ya(s){u(N,s),se(U,e(U).engineer_id=s.id),se(U,e(U).lead_user_id=s.lead_user_id||0),u(Le,!0)}function Ga(s){u(N,s),u(fe,""),u(Me,!0)}function Ka(s){u(N,s),u(De,!0)}async function Ua(){var s,d,m;try{if(!e(U).engineer_id||!e(U).lead_user_id){B.add({type:"warning",message:"Please select a lead"});return}await re.updateEngineer(e(U).engineer_id,{lead_user_id:e(U).lead_user_id}),u(Le,!1),B.add({type:"success",message:"Lead assigned successfully"}),await ce()}catch(f){console.error("Error assigning lead:",f);const p=((d=(s=f.response)==null?void 0:s.data)==null?void 0:d.error)||"Failed to assign lead";((m=f.response)==null?void 0:m.status)===403?B.add({type:"error",message:"Access denied: You can only modify engineers that report to you",duration:7e3}):B.add({type:"error",message:p})}}async function Wa(){var s,d;try{if(e(fe)!=="DELETE"){B.add({type:"warning",message:'Please type "DELETE" to confirm'});return}if(!e(N))return;await re.updateEngineer(e(N).id,{is_active:!1}),u(Me,!1),B.add({type:"success",message:"Engineer deactivated successfully"}),await ce()}catch(m){console.error("Error deleting engineer:",m);const f=((d=(s=m.response)==null?void 0:s.data)==null?void 0:d.error)||"Failed to delete engineer";B.add({type:"error",message:f})}}async function Ja(){var s,d;try{if(!e(N))return;await re.updateEngineer(e(N).id,{is_active:!0}),u(De,!1),B.add({type:"success",message:"Engineer reactivated successfully"}),await ce()}catch(m){console.error("Error reactivating engineer:",m);const f=((d=(s=m.response)==null?void 0:s.data)==null?void 0:d.error)||"Failed to reactivate engineer";B.add({type:"error",message:f})}}function ea(s){return e(Ne).find(d=>d.engineer_id===s&&d.is_active)||null}function Qa(s){return new Date(s).toLocaleDateString()}async function Xa(){await Ra.logout(),$e("/login")}zt(()=>(e(ie),e(le),e(Se),e(n),e(Te)),()=>{u(_e,e(ie).filter(s=>{var p,Y,ge,xe;const d=!e(le)||s.name.toLowerCase().includes(e(le).toLowerCase())||((p=s.lead_name)==null?void 0:p.toLowerCase().includes(e(le).toLowerCase()))||((ge=(Y=ea(s.id))==null?void 0:Y.coach_name)==null?void 0:ge.toLowerCase().includes(e(le).toLowerCase())),m=!e(Se)||!((xe=e(n))!=null&&xe.is_lead)||e(n).is_admin||e(n).is_manager||s.lead_user_id===e(n).id,f=!e(Te)||s.is_active;return d&&m&&f}))}),It(),Tt();var aa=Xe();Nt(s=>{Pt.title="Engineers - KCS Portal"});var Za=ye(aa);{var $a=s=>{var d=Ot();l(s,d)},et=(s,d)=>{{var m=f=>{var p=ws(),Y=ye(p),ge=t(Y),xe=t(ge),ta=t(xe),sa=r(t(ta),2),Fe=t(sa),at=t(Fe);a(Fe);var ra=r(Fe,2);{var tt=i=>{var o=Ht();l(i,o)},st=(i,o)=>{{var _=g=>{var b=Vt();l(g,b)},h=(g,b)=>{{var k=y=>{var v=Yt();l(y,v)},E=(y,v)=>{{var H=A=>{var q=Gt();l(A,q)};x(y,A=>{var q;(q=e(n))!=null&&q.is_coach&&A(H)},v)}};x(g,y=>{var v;(v=e(n))!=null&&v.is_lead?y(k):y(E,!1)},b)}};x(i,g=>{var b;(b=e(n))!=null&&b.is_manager?g(_):g(h,!1)},o)}};x(ra,i=>{var o;(o=e(n))!=null&&o.is_admin?i(tt):i(st,!1)})}var rt=r(ra,2);a(sa),a(ta),a(xe),a(ge);var ia=r(ge,2),na=t(ia),qe=t(na),oa=r(t(qe),2),it=t(oa);{var nt=i=>{var o=Kt();I("click",o,()=>{var _,h;u(F,{name:"",lead_user_id:(_=e(n))!=null&&_.is_lead&&!((h=e(n))!=null&&h.is_admin)?e(n).id:void 0}),u(Ae,!0)}),l(i,o)};x(it,i=>{var o,_;((o=e(n))!=null&&o.is_admin||(_=e(n))!=null&&_.is_manager)&&i(nt)})}ee(2),a(oa),a(qe);var Oe=r(qe,2),da=t(Oe),la=t(da),He=t(la),va=r(t(He),2);pe(va),a(He);var ca=r(He,2),ma=t(ca);{var ot=i=>{var o=Ut(),_=t(o);pe(_),ee(2),a(o),Ia(_,()=>e(Se),h=>u(Se,h)),l(i,o)};x(ma,i=>{var o,_;(o=e(n))!=null&&o.is_lead&&!((_=e(n))!=null&&_.is_admin)&&i(ot)})}var ua=r(ma,2),ga=t(ua);pe(ga),ee(2),a(ua),a(ca),a(la),a(da),a(Oe);var Ve=r(Oe,2),Ye=t(Ve),pa=t(Ye),_a=r(t(pa),2),fa=t(_a),dt=t(fa);a(fa),a(_a),a(pa),a(Ye);var lt=r(Ye,2);{var vt=i=>{var o=Wt();l(i,o)},ct=(i,o)=>{{var _=g=>{var b=Jt();l(g,b)},h=g=>{var b=ls(),k=t(b),E=r(t(k));we(E,5,()=>e(_e),ke,(y,v)=>{var H=ds();const A=Be(()=>ea(e(v).id));var q=t(H),T=t(q),R=t(T,!0);a(T);var w=r(T,2),W=t(w);a(w),a(q);var C=r(q),z=t(C);{var O=L=>{var D=Qt(),oe=t(D,!0);a(D),j(()=>M(oe,e(v).lead_name)),l(L,D)},me=L=>{var D=Xt();l(L,D)};x(z,L=>{e(v).lead_name?L(O):L(me,!1)})}a(C);var ue=r(C),be=t(ue),Z=t(be,!0);a(be),a(ue);var G=r(ue),$=t(G);{var je=L=>{var D=Zt(),oe=t(D,!0);a(D),j(()=>M(oe,e(A).coach_name)),l(L,D)},We=L=>{var D=$t();l(L,D)};x($,L=>{e(A)?L(je):L(We,!1)})}a(G);var Je=r(G),wt=t(Je);{var kt=L=>{var D=es(),oe=t(D,!0);a(D),j(he=>M(oe,he),[()=>Qa(e(A).start_date)],Be),l(L,D)},Et=L=>{var D=as();l(L,D)};x(wt,L=>{e(A)?L(kt):L(Et,!1)})}a(Je);var Ma=r(Je),Da=t(Ma),At=t(Da);Ft(At,()=>e(v).id,L=>{var D=os();const oe=Be(()=>`dropdown-${e(v).id}`);var he=ye(D),Ct=t(he);a(he);var Qe=r(he,2),Sa=t(Qe),Ta=t(Sa),ja=r(Ta,2);{var Lt=Q=>{var P=ts();I("click",P,()=>{Ya(e(v)),ve()}),l(Q,P)};x(ja,Q=>{var P,J,ae,te;((P=e(n))!=null&&P.is_admin||(J=e(n))!=null&&J.is_manager||(ae=e(n))!=null&&ae.is_lead&&e(v).lead_user_id===((te=e(n))==null?void 0:te.id))&&Q(Lt)})}var Ba=r(ja,2);{var Mt=Q=>{var P=Xe(),J=ye(P);{var ae=K=>{var X=ss();I("click",X,()=>{Ha(e(A).id),ve()}),l(K,X)},te=K=>{var X=rs();I("click",X,()=>{Va(e(v)),ve()}),l(K,X)};x(J,K=>{e(A)?K(ae):K(te,!1)})}l(Q,P)};x(Ba,Q=>{var P,J,ae,te;((P=e(n))!=null&&P.is_admin||(J=e(n))!=null&&J.is_manager||(ae=e(n))!=null&&ae.is_lead&&e(v).lead_user_id===((te=e(n))==null?void 0:te.id))&&Q(Mt)})}var Dt=r(Ba,2);{var St=Q=>{var P=Xe(),J=ye(P);{var ae=K=>{var X=is();I("click",X,()=>{Ga(e(v)),ve()}),l(K,X)},te=K=>{var X=ns();I("click",X,()=>{Ka(e(v)),ve()}),l(K,X)};x(J,K=>{e(v).is_active?K(ae):K(te,!1)})}l(Q,P)};x(Dt,Q=>{var P,J;((P=e(n))!=null&&P.is_admin||(J=e(n))!=null&&J.is_manager)&&Q(St)})}a(Sa),a(Qe),j(()=>{za(Qe,"id",e(oe)),za(Ta,"href",`/engineer/${e(v).id??""}/stats`)}),I("click",Ct,()=>Fa(e(oe))),l(L,D)}),a(Da),a(Ma),a(H),j(()=>{M(R,e(v).name),M(W,`ID: ${e(v).id??""}`),qt(be,1,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e(v).is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`),M(Z,e(v).is_active?"Active":"Inactive")}),l(y,H)}),a(E),a(k),a(b),l(g,b)};x(i,g=>{e(_e).length===0?g(_):g(h,!1)},o)}};x(lt,i=>{e(_e).length===0&&e(ie).length===0?i(vt):i(ct,!1)})}a(Ve);var xa=r(Ve,2),Ge=t(xa),ba=t(Ge),mt=t(ba,!0);a(ba),ee(2),a(Ge);var Ke=r(Ge,2),ha=t(Ke),ut=t(ha,!0);a(ha),ee(2),a(Ke);var Ue=r(Ke,2),ya=t(Ue),gt=t(ya,!0);a(ya),ee(2),a(Ue);var wa=r(Ue,2),ka=t(wa),pt=t(ka,!0);a(ka),ee(2),a(wa),a(xa),a(na),a(ia),a(Y);var Ea=r(Y,2);{var _t=i=>{var o=ps(),_=t(o),h=t(_),g=r(t(h),2),b=t(g),k=r(t(b),2);pe(k),a(b);var E=r(b,2),y=r(t(E),2);{var v=T=>{var R=cs();j(()=>{e(F),ze(()=>{e(de)})});var w=t(R);w.value=(w.__value=void 0)??"";var W=r(w);we(W,1,()=>e(de),ke,(C,z)=>{var O=vs(),me={},ue=t(O,!0);a(O),j(()=>{me!==(me=e(z).id)&&(O.value=(O.__value=e(z).id)??""),M(ue,e(z).name)}),l(C,O)}),a(R),Re(R,()=>e(F).lead_user_id,C=>se(F,e(F).lead_user_id=C)),l(T,R)},H=(T,R)=>{{var w=C=>{var z=us();j(()=>{e(F),ze(()=>{e(n),e(de)})});var O=t(z),me={},ue=t(O);a(O);var be=r(O);we(be,1,()=>e(de).filter(Z=>{var G;return Z.id!==((G=e(n))==null?void 0:G.id)}),ke,(Z,G)=>{var $=ms(),je={},We=t($,!0);a($),j(()=>{je!==(je=e(G).id)&&($.value=($.__value=e(G).id)??""),M(We,e(G).name)}),l(Z,$)}),a(z),j(()=>{var Z,G,$;me!==(me=(Z=e(n))==null?void 0:Z.id)&&(O.value=(O.__value=(G=e(n))==null?void 0:G.id)??""),M(ue,`${(($=e(n))==null?void 0:$.name)??""} (You)`)}),Re(z,()=>e(F).lead_user_id,Z=>se(F,e(F).lead_user_id=Z)),l(C,z)},W=C=>{var z=gs();l(C,z)};x(T,C=>{var z;(z=e(n))!=null&&z.is_lead&&e(n)?C(w):C(W,!1)},R)}};x(y,T=>{var R,w;(R=e(n))!=null&&R.is_admin||(w=e(n))!=null&&w.is_manager?T(v):T(H,!1)})}a(E);var A=r(E,2),q=t(A);ee(2),a(A),a(g),a(h),a(_),a(o),Ie(k,()=>e(F).name,T=>se(F,e(F).name=T)),I("click",q,()=>u(Ae,!1)),I("submit",g,Ze(qa)),l(i,o)};x(Ea,i=>{e(Ae)&&i(_t)})}var Aa=r(Ea,2);{var ft=i=>{var o=fs(),_=t(o),h=t(_),g=t(h),b=t(g);a(g);var k=r(g,2),E=t(k),y=r(t(E),2);j(()=>{e(V),ze(()=>{e(Ee)})});var v=t(y);v.value=v.__value=0;var H=r(v);we(H,1,()=>e(Ee),ke,(w,W)=>{var C=_s(),z={},O=t(C,!0);a(C),j(()=>{z!==(z=e(W).id)&&(C.value=(C.__value=e(W).id)??""),M(O,e(W).name)}),l(w,C)}),a(y),a(E);var A=r(E,2),q=r(t(A),2);pe(q),a(A);var T=r(A,2),R=t(T);ee(2),a(T),a(k),a(h),a(_),a(o),j(()=>M(b,`Assign Coach to ${e(N).name??""}`)),Re(y,()=>e(V).coach_user_id,w=>se(V,e(V).coach_user_id=w)),Ie(q,()=>e(V).start_date,w=>se(V,e(V).start_date=w)),I("click",R,()=>u(Ce,!1)),I("submit",k,Ze(Oa)),l(i,o)};x(Aa,i=>{e(Ce)&&e(N)&&i(ft)})}var Ca=r(Aa,2);{var xt=i=>{var o=bs(),_=t(o),h=t(_),g=t(h),b=t(g);a(g);var k=r(g,2),E=t(k),y=r(t(E),2);j(()=>{e(U),ze(()=>{e(de)})});var v=t(y);v.value=v.__value=0;var H=r(v);we(H,1,()=>e(de),ke,(T,R)=>{var w=xs(),W={},C=t(w,!0);a(w),j(()=>{W!==(W=e(R).id)&&(w.value=(w.__value=e(R).id)??""),M(C,e(R).name)}),l(T,w)}),a(y),a(E);var A=r(E,2),q=t(A);ee(2),a(A),a(k),a(h),a(_),a(o),j(()=>M(b,`Change Lead for ${e(N).name??""}`)),Re(y,()=>e(U).lead_user_id,T=>se(U,e(U).lead_user_id=T)),I("click",q,()=>u(Le,!1)),I("submit",k,Ze(Ua)),l(i,o)};x(Ca,i=>{e(Le)&&e(N)&&i(xt)})}var La=r(Ca,2);{var bt=i=>{var o=hs(),_=t(o),h=t(_),g=t(h),b=t(g);a(g);var k=r(g,2),E=r(t(k),4);pe(E),a(k);var y=r(k,2),v=t(y),H=r(v,2);a(y),a(h),a(_),a(o),j(()=>{M(b,`Delete Engineer: ${e(N).name??""}`),H.disabled=e(fe)!=="DELETE"}),Ie(E,()=>e(fe),A=>u(fe,A)),I("click",v,()=>u(Me,!1)),I("click",H,Wa),l(i,o)};x(La,i=>{e(Me)&&e(N)&&i(bt)})}var ht=r(La,2);{var yt=i=>{var o=ys(),_=t(o),h=t(_),g=t(h),b=t(g);a(g);var k=r(g,4),E=t(k),y=r(E,2);a(k),a(h),a(_),a(o),j(()=>M(b,`Reactivate Engineer: ${e(N).name??""}`)),I("click",E,()=>u(De,!1)),I("click",y,Ja),l(i,o)};x(ht,i=>{e(De)&&e(N)&&i(yt)})}j((i,o)=>{M(at,`Welcome, ${e(n).name??""}`),M(dt,`${e(_e).length??""} of ${e(ie).length??""} engineers`),M(mt,e(ie).length),M(ut,i),M(gt,o),M(pt,e(Ee).length)},[()=>e(ie).filter(i=>i.is_active).length,()=>e(Ne).filter(i=>i.is_active).length],Be),I("click",rt,Xa),Ie(va,()=>e(le),i=>u(le,i)),Ia(ga,()=>e(Te),i=>u(Te,i)),l(f,p)};x(s,f=>{e(n)&&f(m)},d)}};x(Za,s=>{e(Pe)?s($a):s(et,!1)})}l(Pa,aa),Rt()}export{Ns as component};
