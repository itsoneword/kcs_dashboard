import{f as v,a as l}from"../chunks/z1_h_S-m.js";import{i as Ee}from"../chunks/CKvl8f00.js";import{p as Oe,o as Pe,t as p,a as Ye,$ as $e,c as a,b as t,s as w,m as S,r,g as s,n as De,d as m,e as P,f as ae}from"../chunks/DO95TrpH.js";import{h as Le,e as K,s as n}from"../chunks/DePN81sB.js";import{i as h}from"../chunks/i89i58Dp.js";import{e as Je,i as Re}from"../chunks/KzdxLMOR.js";import{a as se,b as A}from"../chunks/VlzhU-cE.js";var je=v('<p class="text-xs text-gray-600 mt-2 break-all"> </p>'),Ge=v("<p><strong>User ID:</strong> </p> <p><strong>Name:</strong> </p> <p><strong>Email:</strong> </p> <p><strong>Is Admin:</strong> </p> <p><strong>Is Lead:</strong> </p> <p><strong>Is Coach:</strong> </p>",1),Me=v('<p class="text-gray-500">No user data</p>'),qe=v('<pre class="text-xs bg-gray-100 p-2 rounded overflow-auto"> </pre>'),Fe=v('<p class="text-gray-500">No stored user</p>'),He=v('<pre class="text-xs bg-gray-100 p-2 rounded overflow-auto"> </pre>'),Ke=v('<p class="text-gray-500">No current user</p>'),ze=v('<p class="text-sm text-gray-600"> </p>'),Be=v('<pre class="text-xs bg-gray-100 p-2 rounded mt-2 overflow-auto"> </pre>'),Qe=v('<p class="text-green-600">✓ Success</p> <!> <!>',1),Ve=v('<p class="text-red-600"> </p>'),We=v('<div class="border rounded p-3"><h4 class="font-medium"> </h4> <!></div>'),Xe=v('<div class="space-y-2"></div>'),Ze=v('<div class="min-h-screen bg-gray-50 p-8"><div class="max-w-4xl mx-auto"><h1 class="text-3xl font-bold text-gray-900 mb-8">Authentication & API Debug</h1> <div class="bg-white rounded-lg shadow p-6 mb-6"><h2 class="text-xl font-semibold mb-4">Authentication Status</h2> <div class="grid grid-cols-2 gap-4"><div><p><strong>Is Authenticated:</strong> </p> <p><strong>Has Token:</strong> </p> <!></div> <div><!></div></div></div> <div class="bg-white rounded-lg shadow p-6 mb-6"><h2 class="text-xl font-semibold mb-4">Stored Data</h2> <div class="grid grid-cols-2 gap-4"><div><h3 class="font-medium mb-2">Stored User:</h3> <!></div> <div><h3 class="font-medium mb-2">Current User (from store):</h3> <!></div></div></div> <div class="bg-white rounded-lg shadow p-6 mb-6"><h2 class="text-xl font-semibold mb-4">API Test Results</h2> <div class="space-y-4"><button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 disabled:opacity-50"> </button> <!></div></div> <div class="bg-white rounded-lg shadow p-6"><h2 class="text-xl font-semibold mb-4">Actions</h2> <div class="space-x-4"><button class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">Clear Storage & Reload</button> <button class="bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700">Logout</button> <a href="/login" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 inline-block">Go to Login</a> <a href="/lead" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 inline-block">Go to Team Management</a></div></div></div></div>');function nt(oe,ie){Oe(ie,!1);let c=S(null),z=S(!1),C=S(null),Y=S(null),i=S({}),E=S(!1);Pe(()=>{const e=se.subscribe(o=>{w(c,o.user),w(z,o.isAuthenticated)});return w(C,A.getStoredToken()),w(Y,A.getStoredUser()),e});async function ne(){w(E,!0),w(i,{});try{try{const e=await A.getCurrentUser();m(i,s(i).currentUser={success:!0,data:e})}catch(e){m(i,s(i).currentUser={success:!1,error:e.message})}try{const e=await A.getAllUsers();m(i,s(i).allUsers={success:!0,count:e.users.length})}catch(e){m(i,s(i).allUsers={success:!1,error:e.message})}try{const e=await A.getAllEngineers();m(i,s(i).engineers={success:!0,count:e.engineers.length})}catch(e){m(i,s(i).engineers={success:!1,error:e.message})}try{const e=await A.getAllEvaluations();m(i,s(i).evaluations={success:!0,count:e.evaluations.length})}catch(e){m(i,s(i).evaluations={success:!1,error:e.message})}}catch(e){console.error("Test error:",e)}finally{w(E,!1)}}function le(){localStorage.removeItem("auth_token"),localStorage.removeItem("user"),location.reload()}async function ve(){await se.logout()}Ee();var $=Ze();Le(e=>{$e.title="Debug - KCS Portal"});var B=a($),D=t(a(B),2),Q=t(a(D),2),L=a(Q),J=a(L),de=t(a(J));r(J);var R=t(J,2),ce=t(a(R));r(R);var ue=t(R,2);{var ge=e=>{var o=je(),d=a(o);r(o),p(u=>n(d,`Token: ${u??""}...`),[()=>s(C).substring(0,50)],P),l(e,o)};h(ue,e=>{s(C)&&e(ge)})}r(L);var V=t(L,2),pe=a(V);{var _e=e=>{var o=Ge(),d=ae(o),u=t(a(d));r(d);var N=t(d,2),_=t(a(N));r(N);var x=t(N,2),U=t(a(x));r(x);var I=t(x,2),q=t(a(I));r(I);var T=t(I,2),F=t(a(T));r(T);var g=t(T,2),b=t(a(g));r(g),p(()=>{n(u,` ${s(c).id??""}`),n(_,` ${s(c).name??""}`),n(U,` ${s(c).email??""}`),n(q,` ${s(c).is_admin?"Yes":"No"}`),n(F,` ${s(c).is_lead?"Yes":"No"}`),n(b,` ${s(c).is_coach?"Yes":"No"}`)}),l(e,o)},be=e=>{var o=Me();l(e,o)};h(pe,e=>{s(c)?e(_e):e(be,!1)})}r(V),r(Q),r(D);var j=t(D,2),W=t(a(j),2),G=a(W),me=t(a(G),2);{var he=e=>{var o=qe(),d=a(o,!0);r(o),p(u=>n(d,u),[()=>JSON.stringify(s(Y),null,2)],P),l(e,o)},xe=e=>{var o=Fe();l(e,o)};h(me,e=>{s(Y)?e(he):e(xe,!1)})}r(G);var X=t(G,2),fe=t(a(X),2);{var ye=e=>{var o=He(),d=a(o,!0);r(o),p(u=>n(d,u),[()=>JSON.stringify(s(c),null,2)],P),l(e,o)},we=e=>{var o=Ke();l(e,o)};h(fe,e=>{s(c)?e(ye):e(we,!1)})}r(X),r(W),r(j);var M=t(j,2),Z=t(a(M),2),k=a(Z),Se=a(k,!0);r(k);var Ae=t(k,2);{var ke=e=>{var o=Xe();Je(o,5,()=>Object.entries(s(i)),Re,(d,u)=>{let N=()=>s(u)[0],_=()=>s(u)[1];var x=We(),U=a(x),I=a(U,!0);r(U);var q=t(U,2);{var T=g=>{var b=Qe(),O=t(ae(b),2);{var Ue=f=>{var y=ze(),H=a(y);r(y),p(()=>n(H,`Count: ${_().count??""}`)),l(f,y)};h(O,f=>{_().count!==void 0&&f(Ue)})}var Ie=t(O,2);{var Te=f=>{var y=Be(),H=a(y,!0);r(y),p(Ce=>n(H,Ce),[()=>JSON.stringify(_().data,null,2)],P),l(f,y)};h(Ie,f=>{_().data&&f(Te)})}l(g,b)},F=g=>{var b=Ve(),O=a(b);r(b),p(()=>n(O,`✗ Failed: ${_().error??""}`)),l(g,b)};h(q,g=>{_().success?g(T):g(F,!1)})}r(x),p(()=>n(I,N())),l(d,x)}),r(o),l(e,o)};h(Ae,e=>{Object.keys(s(i)).length>0&&e(ke)})}r(Z),r(M);var ee=t(M,2),te=t(a(ee),2),re=a(te),Ne=t(re,2);De(4),r(te),r(ee),r(B),r($),p(()=>{n(de,` ${s(z)?"Yes":"No"}`),n(ce,` ${s(C)?"Yes":"No"}`),k.disabled=s(E),n(Se,s(E)?"Testing...":"Test API Endpoints")}),K("click",k,ne),K("click",re,le),K("click",Ne,ve),l(oe,$),Ye()}export{nt as component};
